<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>FAFA HQ™ – Panneau Admin</title>
  <link rel="stylesheet" href="assets/style.css">
  <style>
    body {
      background-color: #0f172a;
      color: #f1f5f9;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
    }
    h1 {
      color: #3b82f6;
    }
    .section {
      margin-bottom: 30px;
      padding: 20px;
      background-color: #1e293b;
      border-radius: 10px;
    }
    label {
      display: block;
      margin-bottom: 10px;
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      margin-bottom: 15px;
    }
    button {
      background-color: #3b82f6;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #2563eb;
    }
    .footer {
      color: #64748b;
      margin-top: 40px;
      font-size: 0.9em;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>🧠 FAFA HQ™ – Panneau de Contrôle</h1>

  <div class="section">
    <h2>🔓 Déverrouiller un parcours</h2>
    <label for="unlockInput">Nom du parcours à débloquer :</label>
    <input id="unlockInput" type="text" placeholder="ex : run" />
    <button onclick="unlockParcours()">Débloquer</button>
  </div>

  <div class="section">
    <h2>📩 Envoyer un message aux joueurs</h2>
    <label for="messageInput">Message :</label>
    <textarea id="messageInput" rows="4" placeholder="Tape ton message ici..."></textarea>
    <button onclick="sendMessage()">Envoyer</button>
  </div>

  <div class="section">
    <h2>🕒 Voir les scores</h2>
    <button onclick="showScores()">Afficher les scores</button>
    <button onclick="exportScoresCSV()">📤 Export CSV</button>
  </div>

  <footer class="footer">
    <p>© FAFA™ — Interface privée. Ne pas partager sans autorisation.</p>
  </footer>

  <audio id="audioHQ">
    <source src="assets/audio/admin-connexion.mp3" type="audio/mpeg" />
  </audio>

  <script>
    function unlockParcours() {
      const parcours = document.getElementById('unlockInput').value.trim();
      if (parcours) {
        localStorage.setItem(`unlocked_${parcours}`, true);
        alert(`🔓 Parcours "${parcours}" débloqué !`);
      }
    }

    function sendMessage() {
      const message = document.getElementById('messageInput').value.trim();
      if (message) {
        localStorage.setItem("fafa_message", message);
        alert("📨 Message sauvegardé localement.");
      }
    }

    function showScores() {
      const scores = JSON.parse(localStorage.getItem("fafa_explorations") || "[]");
      if (scores.length === 0) return alert("Aucun score trouvé.");

      let output = "🏆 SCORES :\n";
      scores.forEach((s, i) => {
        output += `${i + 1}. ${s.nom} - ${s.temps} - ${s.score}\n`;
      });
      alert(output);
    }

    function exportScoresCSV() {
      const scores = JSON.parse(localStorage.getItem("fafa_explorations") || "[]");
      if (scores.length === 0) return alert("Aucun score à exporter.");

      let csv = "Nom,Temps,Score\n";
      scores.forEach(s => {
        csv += `${s.nom},${s.temps},${s.score}\n`;
      });

      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "scores_fafa.csv";
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
