<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Code FAFA Secret â€“ FAFA MYSTÃˆREâ„¢</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    .etape {
      background-color: #1e293b;
      color: white;
      margin: 30px auto;
      padding: 20px;
      max-width: 600px;
      border-radius: 10px;
      border-left: 6px solid #f59e0b;
    }

    input, button {
      padding: 12px;
      border-radius: 8px;
      margin-top: 10px;
      width: 100%;
    }

    .hidden {
      display: none;
    }

    .chrono {
      font-size: 1.2em;
      margin-top: 10px;
      color: #fcd34d;
    }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ—ï¸ Code FAFA Secret</h1>
    <p>DÃ©part : Parc Municipal de Banyuls-sur-Mer</p>
    <p>DurÃ©e estimÃ©e : 2h</p>
  </header>

  <main>
    <div class="chrono">
      â±ï¸ Chrono activÃ© : <span id="timer">00:00</span>
    </div>

    <div class="etape">
      <h2>ğŸ¨ Ã‰nigme 1</h2>
      <p>Une fresque colorÃ©e cache un symbole Ã©trange. Lequel vois-tu ?</p>
      <input id="r1" placeholder="Ex : spirale, clef, Å“il...">
      <button onclick="check1()">Valider</button>
      <div id="a1" class="hidden">
        âœ… Bien vu ! <strong>Le savais-tu ?</strong> Les fresques de ville racontent souvent des histoires cryptÃ©es.  
        â¤ Passe Ã  la fontaine codÃ©e...
      </div>
    </div>

    <div class="etape hidden" id="q2">
      <h2>ğŸš° Ã‰nigme 2</h2>
      <p>Une fontaine comporte des chiffres gravÃ©s. Devine ou interprÃ¨te leur signification :</p>
      <input id="r2" placeholder="Ex : annÃ©e, date, code...">
      <button onclick="check2()">Valider</button>
      <div id="a2" class="hidden">
        âœ… Lecture correcte ! <strong>Le savais-tu ?</strong> De nombreuses fontaines anciennes indiquent des dates symboliques ou des repÃ¨res gÃ©ographiques.  
        â¤ DerniÃ¨re Ã©preuve : rapiditÃ© FAFA !
      </div>
    </div>

    <div class="etape hidden" id="q3">
      <h2>âš¡ Ã‰nigme 3 â€“ Chrono</h2>
      <p>Entre le mot magique FAFA en moins de 10 secondes pour dÃ©verrouiller le coffre :</p>
      <input id="r3" placeholder="Mot secret...">
      <button onclick="check3()">Valider</button>
      <div id="a3" class="hidden">
        âœ… ğŸ”“ Code FAFA activÃ© ! <strong>Le savais-tu ?</strong> Ce mot ouvre un coffre rÃ©el dans les versions â€œGroupe SpÃ©cialâ€.  
        <br><br>ğŸ Tu as terminÃ© le parcours ultime ! Tu es digne de la confiance de FAFA EXPLORATORâ„¢ ğŸ”ğŸ‰
      </div>
    </div>
  </main>

  <script>
    let startTime = Date.now();
    const timer = document.getElementById('timer');

    setInterval(() => {
      const now = Date.now();
      const diff = Math.floor((now - startTime) / 1000);
      const min = String(Math.floor(diff / 60)).padStart(2, '0');
      const sec = String(diff % 60).padStart(2, '0');
      timer.textContent = `${min}:${sec}`;
    }, 1000);

    function check1() {
      const rep = document.getElementById('r1').value.toLowerCase();
      if (rep.length > 3) {
        document.getElementById('a1').classList.remove('hidden');
        document.getElementById('q2').classList.remove('hidden');
      } else {
        alert("âŒ Ce nâ€™est pas assez prÃ©cis !");
      }
    }

    function check2() {
      const rep = document.getElementById('r2').value.toLowerCase();
      if (rep.includes("2023") || rep.includes("code") || rep.length > 4) {
        document.getElementById('a2').classList.remove('hidden');
        document.getElementById('q3').classList.remove('hidden');
      } else {
        alert("âŒ Mauvaise interprÃ©tation !");
      }
    }

    function check3() {
      const rep = document.getElementById('r3').value.toLowerCase();
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      if (rep.includes("fafa") && elapsed <= 600) {
        document.getElementById('a3').classList.remove('hidden');
      } else if (elapsed > 600) {
        alert("â±ï¸ Temps Ã©coulÃ© ! Recommence plus vite !");
      } else {
        alert("âŒ Mauvais mot !");
      }
    }
  </script>
</body>
</html>
