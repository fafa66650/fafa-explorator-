<!-- patrimoine10/intro.html (optimis√© avec chrono, boussole, carte et ambiance) -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>üçá FAFA Patrimonio 10 ‚Äì Le Vin Myst√®re de la Cave</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../style.css">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #fef2f2, #fff7ed);
      text-align: center;
      padding: 60px 20px;
      color: #7c2d12;
    }
    .box {
      background: white;
      max-width: 750px;
      margin: auto;
      padding: 40px;
      border-radius: 18px;
      box-shadow: 0 0 30px rgba(0,0,0,0.05);
      position: relative;
    }
    h1 { font-size: 2.4em; color: #92400e; }
    p { font-size: 1.2em; color: #78350f; margin: 20px 0; }
    button {
      margin-top: 30px;
      padding: 14px 30px;
      font-size: 1.1em;
      border: none;
      border-radius: 10px;
      background: #c2410c;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover { background: #a16207; }
    .logo { margin-bottom: 20px; }
    .chrono { font-size: 1.1em; margin-top: 15px; color: #9a3412; }
    #map { width: 100%; height: 200px; border-radius: 12px; margin-top: 20px; }
    .boussole {
      width: 60px;
      position: absolute;
      top: 20px;
      right: 20px;
      animation: spin 6s linear infinite;
    }
    @keyframes spin { 100% { transform: rotate(360deg); } }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
  <div class="box">
    <img src="../../actifs/logo-fafa.png" alt="Logo FAFA" class="logo" style="width: 100px;">
    <img src="../../actifs/boussole.png" alt="Boussole" class="boussole">
    <h1>üçá Le Vin Myst√®re de la Cave</h1>
    <p>
      Une cuv√©e d‚Äôexception se cacherait dans les profondeurs de la cave coop√©rative de Banyuls...<br><br>
      Mais seul un aventurier capable de r√©soudre les 10 √©nigmes vigneronnes pourra la r√©v√©ler.<br><br>
      üç∑ Que la chasse au nectar commence !
    </p>
    <div class="chrono">Chrono : <span id="chrono">00:00</span></div>
    <div id="map"></div>
    <audio autoplay loop>
      <source src="../../sons/ambiance-cave.mp3" type="audio/mp3">
    </audio>
    <button onclick="demarrer()">üîç Entrer dans la cave</button>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    function demarrer() {
      localStorage.setItem("start", Date.now());
      location.href = "enigme1.html";
    }

    // Chronom√®tre
    let startTime = Date.now();
    setInterval(() => {
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      const min = String(Math.floor(elapsed / 60)).padStart(2, '0');
      const sec = String(elapsed % 60).padStart(2, '0');
      document.getElementById("chrono").textContent = `${min}:${sec}`;
    }, 1000);

    // Carte interactive
    const map = L.map('map').setView([42.4833, 3.1333], 15); // Coord. Banyuls-sur-Mer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Carte ¬© OpenStreetMap',
      maxZoom: 18
    }).addTo(map);
    L.marker([42.4833, 3.1333]).addTo(map).bindPopup('Cave de Banyuls').openPopup();
  </script>
</body>
</html>

<!-- patrimoine10/enigme1.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 1 ‚Äì Le fruit de la vigne</title></head>
<body>
  <h2>üçá √ânigme 1 : Le fruit de la vigne</h2>
  <p>Quel fruit est √† l‚Äôorigine du vin ?</p>
  <input id="rep"><button onclick="valider()">Valider</button>
  <script>
    if (document.getElementById("rep").value.toLowerCase().includes("raisin"))
      location.href = 'enigme2.html';
    else alert("Indice : il pousse en grappe.");
  </script>
</body>
</html>

<!-- patrimoine10/enigme2.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 2 ‚Äì C√©page local</title></head>
<body>
  <h2>üç∑ √ânigme 2 : C√©page local</h2>
  <p>Quel c√©page est typique des vins de Banyuls ?</p>
  <input id="rep"><button onclick="valider()">Valider</button>
  <script>
    if (document.getElementById("rep").value.toLowerCase().includes("grenache"))
      location.href = 'enigme3.html';
    else alert("Un c√©page rouge et sucr√©...");
  </script>
</body>
</html>

<!-- patrimoine10/enigme3.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 3 ‚Äì Photo de la barrique</title></head>
<body>
  <h2>üì∏ √ânigme 3 : Photo de la barrique</h2>
  <p>Photographie une barrique ou un f√ªt visible dans la cave.</p>
  <button onclick="location.href='enigme4.html'">üì∑ Photo prise</button>
</body>
</html>

<!-- patrimoine10/enigme4.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 4 ‚Äì Ar√¥me myst√®re</title></head>
<body>
  <h2>üëÉ √ânigme 4 : Ar√¥me myst√®re</h2>
  <p>Quel ar√¥me fruit√© est souvent associ√© au vin rouge ?</p>
  <input id="rep"><button onclick="valider()">Valider</button>
  <script>
    const r = document.getElementById('rep').value.toLowerCase();
    if (r.includes("cerise") || r.includes("m√ªre") || r.includes("cassis"))
      location.href = 'enigme5.html';
    else alert("C‚Äôest un fruit rouge !");
  </script>
</body>
</html>

<!-- patrimoine10/enigme5.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 5 ‚Äì Pressurage</title></head>
<body>
  <h2>üßÉ √ânigme 5 : Pressurage</h2>
  <p>Quel mot d√©signe l‚Äôaction d‚Äôextraire le jus du raisin ?</p>
  <input id="rep"><button onclick="valider()">Valider</button>
  <script>
    if (document.getElementById("rep").value.toLowerCase() === 'pressurage')
      location.href = 'enigme6.html';
    else alert("Mot technique du vigneron.");
  </script>
</body>
</html>

<!-- patrimoine10/enigme6.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 6 ‚Äì Mot secret</title></head>
<body>
  <h2>üî§ √ânigme 6 : Mot secret</h2>
  <p>R√©organise : <strong>INEV</strong></p>
  <input id="rep"><button onclick="valider()">Valider</button>
  <script>
    if (document.getElementById('rep').value.toLowerCase() === 'vine')
      location.href = 'enigme7.html';
    else alert("Un mot √† l‚Äôenvers, un liquide pr√©cieux...");
  </script>
</body>
</html>

<!-- patrimoine10/enigme7.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 7 ‚Äì Code du chai</title></head>
<body>
  <h2>üî¢ √ânigme 7 : Code du chai</h2>
  <p>Dans un coin est inscrit : 8 + 2 x 2. R√©sous-le.</p>
  <input id="rep"><button onclick="valider()">Valider</button>
  <script>
    if (document.getElementById("rep").value === '12') location.href = 'enigme8.html';
    else alert("Pense aux r√®gles de calcul...");
  </script>
</body>
</html>

<!-- patrimoine10/enigme8.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 8 ‚Äì Lieu de stockage</title></head>
<body>
  <h2>üèöÔ∏è √ânigme 8 : Lieu de stockage</h2>
  <p>Quel est le nom de la pi√®ce o√π le vin vieillit en barrique ?</p>
  <input id="rep"><button onclick="valider()">Valider</button>
  <script>
    if (document.getElementById("rep").value.toLowerCase().includes("chai"))
      location.href = 'enigme9.html';
    else alert("Un mot utilis√© par les vignerons...");
  </script>
</body>
</html>

<!-- patrimoine10/enigme9.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 9 ‚Äì Temp√©rature id√©ale</title></head>
<body>
  <h2>üå°Ô∏è √ânigme 9 : Temp√©rature id√©ale</h2>
  <p>Combien de degr√©s faut-il pour conserver le vin (environ) ?</p>
  <input id="rep"><button onclick="valider()">Valider</button>
  <script>
    const r = parseInt(document.getElementById("rep").value);
    if (r >= 10 && r <= 16) location.href = 'enigme10.html';
    else alert("Entre 10 et 16¬∞C en g√©n√©ral...");
  </script>
</body>
</html>

<!-- patrimoine10/enigme10.html -->
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>√ânigme 10 ‚Äì Le mot final</title></head>
<body>
  <h2>üç∑ √ânigme 10 : Mot final</h2>
  <p>Quel mot relie cave, raisin, fermentation, bouteille et tradition ?</p>
  <input id="rep"><button onclick="valider()">Valider</button>
  <script>
    if (document.getElementById("rep").value.toLowerCase() === 'vin')
      location.href = 'fin.html';
    else alert("Ce mot est au c≈ìur de tout ce parcours...");
  </script>
</body>
</html>

<!-- patrimoine10/fin.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>üçá Fin ‚Äì Le Vin Myst√®re de la Cave</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #fff7ed, #fef2f2);
      text-align: center;
      padding: 60px 20px;
      color: #7c2d12;
    }
    .container {
      background: white;
      max-width: 700px;
      margin: auto;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 0 40px rgba(0,0,0,0.08);
      position: relative;
    }
    h1 {
      font-size: 2.4em;
      color: #c2410c;
      animation: fadeIn 1s ease-in-out;
    }
    .badge {
      margin: 30px auto;
      padding: 15px;
      background: #ea580c;
      color: white;
      border-radius: 12px;
      font-size: 1.3em;
      display: inline-block;
      animation: pulse 1.2s ease-in-out infinite alternate;
    }
    #chrono {
      font-size: 1.3em;
      margin-top: 20px;
    }
    .info {
      margin-top: 30px;
      font-style: italic;
      color: #9a3412;
    }
    .btn {
      margin: 20px 10px 0;
      padding: 12px 24px;
      font-size: 1em;
      background: #92400e;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .btn:hover {
      background: #b45309;
    }
    .vignette {
      width: 100%;
      height: 200px;
      margin-top: 30px;
      border-radius: 12px;
      background: url('../../actifs/vigne-banyuls.jpg') center/cover no-repeat;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes pulse {
      from { transform: scale(1); }
      to { transform: scale(1.08); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üçá F√©licitations, D√©gustateur de L√©gende !</h1>
    <p>Tu as retrouv√© la cuv√©e myst√®re et perc√© les secrets de la cave de Banyuls.</p>
    <div class="badge">üèÖ Badge : Ma√Ætre du Vin FAFA‚Ñ¢</div>
    <p id="chrono">‚è±Ô∏è Temps total : ...</p>
    <div class="vignette"></div>
    <p class="info">üí° Le savais-tu ? Le vin doux naturel de Banyuls est prot√©g√© par une AOP et repose parfois plusieurs ann√©es en f√ªts expos√©s au soleil pour gagner en richesse.</p>
    <button class="btn" onclick="location.href='../../index.html'">üè† Accueil FAFA</button>
    <button class="btn" onclick="location.href='../../carnet-explorateur.html'">üìò Voir mon Carnet</button>
    <button class="btn" onclick="location.href='../../bonus-vin.html'">üç∑ Bonus Vigneron</button>
  </div>

  <script>
    const debut = localStorage.getItem("start");
    const nomParcours = "Le Vin Myst√®re de la Cave";
    const score = "10/10";

    if (debut) {
      const fin = Date.now();
      const duree = Math.floor((fin - debut) / 1000);
      const min = String(Math.floor(duree / 60)).padStart(2, '0');
      const sec = String(duree % 60).padStart(2, '0');
      const temps = `${min}m ${sec}s`;
      document.getElementById("chrono").innerText = `‚è±Ô∏è Temps total : ${temps}`;

      let historique = JSON.parse(localStorage.getItem("fafa_explorations") || "[]");
      historique.push({ nom: nomParcours, temps: temps, score: score });
      localStorage.setItem("fafa_explorations", JSON.stringify(historique));

      localStorage.removeItem("start");
    }
  </script>
</body>
</html>
